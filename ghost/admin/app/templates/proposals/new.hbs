<section class="gh-canvas proposel-new">
    <header class="gh-canvas-header">
        <h2 class="gh-canvas-title">New Proposals</h2>
    </header>

    <div class="gh-onboarding-items">
        <div class="gh-onboarding-item-content" {{on "click" this.openModal}}>
            <li class="gh-onboarding-item-details">
                <span class="gh-onboarding-item-title">{{model.title}}</span>
                <span class="gh-onboarding-item-description">{{model.content}}</span>
            </li>
        </div>

        <ModalBox @isOpen={{this.isModalOpen}} @onClose={{this.closeModal}}>
           <div 
            class="flex w-full transition-all duration-300 ease-in-out {{if this.isRightNavOpen 'with-right-nav'}}">
    
            <!-- MAIN CONTENT AREA -->
            <div class="transition-all duration-300 ease-in-out px-8 left-main-content" 
                style={{if this.isRightNavOpen "width: 66%" "width: 100%"}}>

                {{#if (eq this.currentStep 1)}}
                    <button
                        class="close-btn absolute top-4 right-4 text-gray-500 hover:text-black"
                        type="button"
                        aria-label="Close"
                        {{on "click" this.closeModal}}>
                        ✕
                    </button>
                    <div class="modal-box-body">
                        <div class="text-center">
                            <button class="gh-btn gh-btn-primary mb-4"><span>START</span></button>
                            <h2 class="text-xl font-bold mb-1">Let’s generate</h2>
                            <p class="mb-6">Enter topic that you like to generate content on.</p>
                        </div>

                        <div class="mb-4 topic-div">
                            <div class="mb-2 topic-div-content">
                                <strong>Generate a</strong>
                                <span class="badge" {{on "click" (fn this.openRightNav "organizationSelector")}}>Blog  Article</span>
                                <strong>, from the</strong>
                                <span class="badge" {{on "click" (fn this.openRightNav "organizationSelector")}}>organization</span>,
                                <strong>for a</strong>
                                <span class="badge" {{on "click" (fn this.openRightNav "organizationSelector")}}>reader type </span>
                                <strong>on the following topic(s).</strong>
                            </div>
                        </div>

                        <div class="mb-4 input-div">
                            <div class="flex justify-between">
                                <label><strong>Topic or Focus:</strong></label>
                                <button class="add-new-details-cta flex items-center gap-1 text-green-600 hover:text-green-800 text-sm font-bold"  {{on "click" this.toggleSuggestions}} >
                                    <svg xmlns="http://www.w3.org/2000/svg" 
                                        class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                                    </svg>
                                    Get Ideas
                                </button>
                            </div>
                            {{!-- <label><strong>Topic or Focus:</strong></label> --}}
                            {{!-- <input type="text" class="form-control first-input" placeholder="Enter topic or subject. Ex, How small can maintain better cash flow with systems automation."> --}}
                            <textarea 
                                class="form-control resize-y min-h-[100px] max-h-[400px] overflow-auto"
                                placeholder="Enter topic or subject. Ex, How small can maintain better cash flow with systems automation."></textarea>
                            
                        </div>
                        {{#if this.showTopicSuggestions}}
                            <div class="mt-4 bg-gray-50 p-4 rounded-md border border-gray-200 relative">
                                <p class="text-sm text-gray-500 mb-3">Example topics:</p>
                                
                                <div class="flex flex-wrap gap-3">
                                <span class="px-4 py-2 rounded-full border text-sm bg-white shadow-sm cursor-pointer hover:bg-gray-100">
                                    Authentic & traditional recipes from world cuisines.
                                </span>
                                <span class="px-4 py-2 rounded-full border text-sm bg-white shadow-sm cursor-pointer hover:bg-gray-100">
                                    How to build a modern JavaScript library from scratch.
                                </span>
                                <span class="px-4 py-2 rounded-full border text-sm bg-white shadow-sm cursor-pointer hover:bg-gray-100">
                                    A time traveler's love story in a thrilling adventure.
                                </span>
                                </div>

                                <button class="absolute right-4 top-4 text-sm text-blue-600 hover:text-blue-800 font-semibold"
                                        {{on "click" this.closeSuggestions}}>
                                Close
                                </button>
                            </div>
                            {{/if}}

                        <div class="mb-4 input-div">
                            <textarea 
                                class="form-control resize-y min-h-[100px] max-h-[400px] overflow-auto"
                                placeholder="Enter any related context (max content size to be 4000 characters)"></textarea>
                            
                        </div>

                        <div class="mb-4 input-div">
                            <textarea 
                                class="form-control resize-y min-h-[50px] max-h-[300px] overflow-auto"
                                placeholder="Enter corresponding website URL"></textarea>
                            
                        </div>
                    </div>
                    
                    <div class="flex pre-bottom-section justify-between items-center px-4 py-2 border-t border-b text-sm bg-white shadow-sm z-40"
                        style="position: fixed; bottom: 60px; left: 0; right: 0; padding: 0px 20px 10px; width: {{this.bottomSectionWidth}};">
                        
                        <div class="flex items-center text-xs text-red-600 italic">
                            📌
                            <span><strong>AI Results:</strong> Results can be at times unpredictable and remain experimental. Carefully review and correct anything before publishing.</span>
                        </div>

                        <div class="flex items-center gap-2">
                            
                            <button class="add-new-details-cta flex items-center gap-1 text-green-600 hover:text-green-800 text-sm font-bold"  {{on "click" this.toggleSuggestions}} >
                                    <svg xmlns="http://www.w3.org/2000/svg" 
                                        class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                                    </svg>
                                   Get Suggestions
                                </button>
                            <div class="flex items-center text-xs text-gray-500 info-div">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M12 20.5C6.753 20.5 2.5 16.247 2.5 11S6.753 1.5 12 1.5 21.5 5.753 21.5 11 17.247 20.5 12 20.5z"/>
                                </svg>
                                <span class="font-bold text-sm">More Info</span>
                            </div>
                        </div>
                    </div>

                    <div class="flex justify-between items-center bottom-section"  style="position: fixed; bottom: 0; left: 0; right: 0; width: {{this.bottomSectionWidth}};">
                        <div class="flex items-center text-xs text-gray-500 info-div">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M12 20.5C6.753 20.5 2.5 16.247 2.5 11S6.753 1.5 12 1.5 21.5 5.753 21.5 11 17.247 20.5 12 20.5z"/>
                            </svg>
                            <span>More Info</span>
                        </div>

                        <div class="flex gap-2 cta-div">
                            <button {{on "click" this.closeModal}} class="gh-btn">Close</button>
                            {{!-- <button class="gh-btn gh-btn-primary" {{on "click" this.nextStep}}>Next</button> --}}
                            <button class="gh-btn gh-btn-primary flex items-center gap-1" {{on "click" this.nextStep}}>
                                Next
                                <span class="transition-transform duration-300 transform group-hover:translate-x-1">
                                    →
                                </span>
                                {{!-- <span class="transition-transform duration-300 transform group-hover:translate-x-1">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
                                    </svg>
                                </span> --}}
                            </button>
                        </div>
                    </div>

                    
                {{/if}}

                {{#if (eq this.currentStep 2)}}
                    <button
                        class="absolute top-4 right-4 text-gray-500 hover:text-black"
                        type="button"
                        aria-label="Close"
                        {{on "click" this.closeModal}}>
                        ✕
                    </button>
                    <div class="modal-box-body">
                        <div class="text-center mb-4">
                            <button class="gh-btn gh-btn-primary rounded-full px-6 py-1 text-sm"><span>FINISH</span></button>
                        </div>

                        <div class="flex justify-center mb-6 tab-section">
                            <div class="bg-gray-100 rounded-full flex gap-8 px-6 py-2 text-sm font-medium text-gray-500 tab-div">
                                <button
                                    class="{{if (eq this.activeTab 'references') 'text-black font-semibold'}}"
                                    {{on "click" (fn this.setTab "references")}}>
                                    References
                                </button>
                                <button
                                    class="{{if (eq this.activeTab 'pdfs') 'text-black font-semibold'}}"
                                    {{on "click" (fn this.setTab "pdfs")}}>
                                    PDFs
                                </button>
                                <button
                                    class="{{if (eq this.activeTab 'social') 'text-black font-semibold'}}"
                                    {{on "click" (fn this.setTab "social")}}>
                                    Social Media
                                </button>
                            </div>
                        </div>
                        <!-- Tab Content (Step 3) -->
                        {{#if (eq this.activeTab "references")}}
                            <div class="text-center">
                                <h2 class="text-xl font-bold mb-1">Enter References</h2>
                                <p class="mb-6">Enter topic that you like to generate content on.</p>
                            </div>
                            <!-- Inspired Information -->
                            <div class="mb-4 input-div">
                                <div class="flex justify-between">
                                    <label><strong>Inspired Information:</strong></label>
                                    <button type="button"
                                        class="add-new-details-cta flex items-center gap-1 text-green-600 hover:text-green-800 text-sm font-bold"
                                        {{on "click" this.addInspiredDetail}}>
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                                            stroke="currentColor" stroke-width="2">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                                        </svg>
                                        Add new details
                                    </button>
                                </div>

                                {{#each this.inspiredDetails as |detail index|}}
                                    <div class="flex items-center gap-2 mt-2 mb-2">
                                        <textarea 
                                            class="form-control resize-y min-h-[80px] max-h-[300px] overflow-auto flex-1"
                                            placeholder="Enter competitor content URL or text"
                                            value={{detail}}></textarea>
                                    </div>
                                {{/each}}
                            </div>


                            <!-- Competitor Information -->
                            
                            <div class="mb-4 input-div">
                                <div class="flex justify-between">
                                    <label><strong>Competitor Information:</strong></label>
                                    <button type="button"
                                        class="add-new-details-cta flex items-center gap-1 text-green-600 hover:text-green-800 text-sm font-bold"
                                        {{on "click" this.addCompetitorDetail}}>
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                                            stroke="currentColor" stroke-width="2">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                                        </svg>
                                        Add new details
                                    </button>
                                </div>

                                {{#each this.competitorDetails as |detail index|}}
                                    <div class="flex items-center gap-2 mt-2 mb-2">
                                        <textarea 
                                            class="form-control resize-y min-h-[80px] max-h-[300px] overflow-auto flex-1"
                                            placeholder="Enter competitor content URL or text"
                                            value={{detail}}></textarea>
                                    </div>
                                {{/each}}
                            </div>


                            
                        {{/if}}

                        {{#if (eq this.activeTab "pdfs")}}
                            <div class="input-div with-right-nav">
                               
                                <div>
                                    <h3 class="text-center text-lg font-bold mb-2">Upload PDFs</h3>
                                    <p class="text-center mb-6 text-sm">Enter topic that you like to generate content on.</p>
                                    
                                    <div class="flex gap-8">
                                    {{!-- Left: Uploaded PDFs --}}
                                    <div class="flex flex-col gap-2 w-1/2">
                                        <p class="text-sm font-semibold mb-2">Upload PDF File:</p>

                                        {{#each this.uploadedFiles as |file|}}
                                        <div class="uploaded-file-item flex items-center gap-2">
                                            <div>
                                                <div class="pdf-icon">
                                                    <img width="48" height="48" src="https://img.icons8.com/fluency-systems-filled/48/pdf-2.png" alt="pdf-2"/>
                                                    {{!-- <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg> --}}
                                                </div>
                                                <div class="tick-icon-pdf">
                                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-check-circle text-green-500"><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"></path><path d="M9 12l2 2 4-4"></path></svg>
                                                </div>
                                            </div>
                                            
                                            <div>
                                            <div>
                                                {{file.name}}  
                                                <span class="text-green-500 text-xs ml-2 file-status">{{file.status}}</span>
                                            </div>
                                            
                                            </div>
                                            
                                        </div>
                                        {{/each}}
                                    </div>

                                    {{!-- Right: Upload Panel --}}
                                    <div class="flex flex-col w-1/2 items-center">
                                        <input
                                            type="file"
                                            accept=".pdf"
                                            id="pdf-upload"
                                            class="hidden"
                                            {{on "change" this.handleFileSelect}} />
                                        <button type="button"
                                            class="add-new-details-cta flex items-center gap-1 text-green-600 hover:text-green-800 text-sm font-bold"
                                            {{on "click" this.triggerFileDialog}}
                                            {{on "drop" this.handleFileDrop}}
                                            {{on "dragover" this.handleDragOver}}>


                                            <svg xmlns="http://www.w3.org/2000/svg"
                                                class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                                                stroke="currentColor" stroke-width="2">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                                            </svg>
                                            Upload File
                                        </button>

                                        {{!-- <div class="flex justify-between">
                                            <p class="text-sm font-semibold mb-2">Upload File</p>
                                            <div class="flex items-center gap-2 mb-4">
                                                <svg class="w-4 h-4 text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/></svg>
                                                <span class="text-sm font-medium">Add new PDF</span>
                                            </div>
                                        </div> --}}
                                        

                                       <!-- File Upload Box -->
                                            <div
                                                class="form-control border-2 border-dashed border-gray-300 rounded-md p-10 text-center text-sm text-gray-500 cursor-pointer hover:border-gray-500 w-full"
                                                {{on "drop" this.handleFileDrop}}
                                                {{on "dragover" this.handleDragOver}}
                                                {{on "click" this.triggerFileDialog}}>

                                                <input type="file"
                                                    accept=".pdf"
                                                    id="pdf-upload"
                                                    class="hidden"
                                                    {{on "change" this.handleFileSelect}} />

                                                <label for="pdf-upload" class="cursor-pointer block">
                                                    Drag & Drop or <span class="text-green-600 font-semibold">Click to Upload</span>
                                                </label>
                                            </div>
                                    </div>
                                    </div>
                                </div>
                                
                            </div>
                            {{/if}}

                        {{#if (eq this.activeTab "social")}}
                           <div class="input-div">
                            <h3 class="text-center text-lg font-bold mb-2">And, Social Media</h3>
                            <p class="text-center mb-6 text-sm">Select below to generate social media platform specific content.</p>
                           </div>
                            
                            <div class="flex justify-center flex-wrap gap-3">
                                {{#each this.socialPlatforms as |platform|}}
                                    <div class="flex flex-col items-center">
                                        <button
                                        class="social-icon-btn w-16 h-16 rounded-lg border border-gray-300 flex items-center justify-center relative
                                        {{if platform.selected 'text-white' 'bg-gray-100'}}"
                                        {{on "click" (fn this.togglePlatform platform.name)}}
                                        >
                                        {{#if platform.selected}}
                                            <svg xmlns="http://www.w3.org/2000/svg" class="green-check-social absolute top-1 right-1 w-4 h-4 text-green-500" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 00-1.414 0L8 12.586 4.707 9.293a1 1 0 00-1.414 1.414l4 4a1 1 0 001.414 0l8-8a1 1 0 000-1.414z" clip-rule="evenodd" />
                                            </svg>
                                            {{else}}
                                                <svg xmlns="http://www.w3.org/2000/svg" class="gray-check-social absolute top-1 right-1 w-4 h-4 text-gray-400" viewBox="0 0 20 20" fill="currentColor">
                                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 00-1.414 0L8 12.586 4.707 9.293a1 1 0 00-1.414 1.414l4 4a1 1 0 001.414 0l8-8a1 1 0 000-1.414z" clip-rule="evenodd" />
                                                </svg>
                                            {{/if}}

                                            {{! Render icon, which could be an SVG string or fallback image }}
                                            {{#if (has-block)}}
                                                {{yield}}
                                            {{else}}
                                                {{! If platform.icon is a string containing inline SVG, render it using triple curlies }}
                                                {{{platform.icon}}}
                                            {{/if}}
                                            </button>
                                            <span class="text-xs mt-1">{{platform.label}}</span>
                                        </div>
                                        {{/each}}

                            </div>

                            <div class="space-y-15">
                               <div class="flex items-start space-x-3">
                                
                                    <div>
                                        <div class="text-sm font-medium text-black">Enable SERP (Search Engine Results Page)</div>
                                        <p class="text-xs text-gray-500">
                                        This newsletter will be available to all members. Your 8 existing subscribers will also be opted-in to receive it.
                                        </p>
                                    </div>
                                    <label class="flex items-center toggle-label cursor-pointer">
                                        <input 
                                        type="checkbox" 
                                        class="sr-only peer" 
                                        checked={{this.enableSERP}} 
                                        {{on "change" (fn this.toggleSERP)}}
                                        />
                                        <div class="w-11 h-6 border bg-gray-300 rounded-full peer-checked:bg-black transition duration-300 relative">
                                            <div class="dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition peer-checked:translate-x-5"></div>
                                        </div>
                                    </label>
                                </div>


                                <div class="flex items-center space-x-3">
                                    
                                    <span class="text-sm text-black">Enable counter arguments for more accurate results.</span>
                                    <label class="flex items-center toggle-label cursor-pointer">
                                        <input type="checkbox" class="sr-only peer"  checked={{this.enableCounter}} {{on "change" this.toggleCounter}} />
                                        <div class="w-11 h-6 border bg-gray-300 rounded-full peer-checked:bg-black transition duration-300 relative">

                                            <div class="dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition peer-checked:translate-x-5"></div>
                                        </div>
                                    </label>
                                </div>

                                <div class="flex items-center space-x-3">
                                    
                                    <span class="text-sm text-black">Auto generate white Paper</span>
                                    <label class="flex items-center toggle-label cursor-pointer">
                                    <input type="checkbox" class="sr-only peer"  checked={{this.autoWhitepaper}} {{on "change" this.toggleWhitepaper}} />
                                    <div class="w-11 h-6 border bg-gray-300 rounded-full peer-checked:bg-black transition duration-300 relative">

                                        <div class="dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition peer-checked:translate-x-5"></div>
                                    </div>
                                    </label>
                                </div>
                                </div>

                        

                        {{/if}}

                    </div>
                    
                    

                    <div class="flex justify-between items-center bottom-section"  style="width: {{this.bottomSectionWidth}};">
                        <div class="flex items-center text-xs text-gray-500 info-div">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M12 20.5C6.753 20.5 2.5 16.247 2.5 11S6.753 1.5 12 1.5 21.5 5.753 21.5 11 17.247 20.5 12 20.5z"/>
                            </svg>
                            <span>More Info</span>
                        </div>

                        <div class="flex gap-2 cta-div">
                        <button {{on "click" this.prevStep}} class="gh-btn">Back</button>
                            {{!-- <button class="gh-btn gh-btn-primary" {{on "click" this.closeModal}}>Finish</button> --}}
                        {{!-- {{#if (eq this.activeTab "social")}}
                        <button class="gh-btn gh-btn-primary" {{on "click" this.closeModal}}>Finish</button>
                        {{else}} --}}
                        <button class="gh-btn gh-btn-primary" {{on "click" this.nextStep}}>Next</button>
                        {{!-- {{/if}} --}}
                        </div>
                    </div>

                    
                {{/if}}
                {{#if (eq this.currentStep 3)}}
                    <button
                        class="absolute top-4 right-4 text-gray-500 hover:text-black"
                        type="button"
                        aria-label="Close"
                        {{on "click" this.closeModal}}>
                        ✕
                    </button>
                    <div class="modal-box-body">
                        <div class="p-6">

                            <div class="text-center mb-6">
                                <div class="text-center mb-4">
                                    <button class="gh-btn gh-btn-primary rounded-full px-6 py-1 text-sm"><span>FINISH</span></button>
                                </div>
                            {{!-- <button class="px-4 py-1 bg-black text-white text-xs rounded-full uppercase tracking-wider">Finish</button> --}}
                            <h2 class="text-2xl font-bold mt-3">Have a Choice?</h2>
                            <p class="text-sm text-gray-500">Enter any inspirations, PDFs, and select</p>
                            </div>

                            <div class="mb-4 flex items-center gap-2">
                            <input type="checkbox" id="selectAll" checked={{this.allSelected}} {{on "change" this.toggleSelectAll}} />
                            <label for="selectAll" class="flex items-center gap-2 cursor-pointer">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                                </svg>
                                Select All
                            </label>
                            </div>

                            <div class="space-y-3">
                            {{#each this.choices as |choice index|}}
                                <div class="p-3 rounded-md border border-gray-200 hover:shadow-md transition relative bg-white {{if choice.selected 'ring-2 ring-green-500'}}">
                                <label class="flex items-start gap-2 cursor-pointer">
                                    <input type="checkbox" checked={{choice.selected}} {{on "change" (fn this.toggleChoice index)}} />
                                    <div>
                                    <p class="font-semibold">{{choice.title}}</p>
                                    <p class="text-sm text-gray-600">{{choice.description}}</p>
                                    </div>
                                </label>

                                {{#if choice.saved}}
                                    <div class="absolute top-3 right-3 flex items-center gap-1 bg-green-100 text-green-600 text-xs font-semibold px-2 py-1 rounded">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                    </svg>
                                    Save Draft
                                    </div>
                                {{/if}}
                                </div>
                            {{/each}}
                            </div>

                           

                        </div>
                    </div>
                     <div class="flex justify-between items-center bottom-section"  style="width: {{this.bottomSectionWidth}};">
                            {{!-- <button class="text-white font-semibold" {{on "click" this.prevStep}}>
                                ← Back
                            </button> --}}
                            <div class="flex gap-2 cta-div">
                                <button type="button" {{on "click" this.prevStep}} class="gh-btn">Back</button>
                            </div>
                            
                            <div class="flex gap-3 cta-div">
                                <button class="bg-white text-black px-4 py-2 rounded" {{on "click" this.closeModal}} >Ask Suggestions</button>
                                <button class="bg-white text-black px-4 py-2 rounded" {{on "click" this.closeModal}} >Save As Idea</button>
                                <button class="bg-white text-black px-4 py-2 rounded flex items-center gap-2" 
                                
                                {{on "click" this.closeModal}}>
                                Generate →
                                </button>
                            </div>
                    </div>
                    {{/if}}

             </div>

            <!-- RIGHT SIDE NAV (conditionally shown) -->
              {{#if this.isRightNavOpen}}
                <div class="w-1/3 min-w-[300px] right-nav-main bg-white border-l shadow-lg h-full p-6 transition-all duration-300 ease-in-out">
                      <aside class="right-nav-panel w-[300px] shadow-lg border-l bg-white fixed right-0 top-0 h-full z-50">
                        <div class="flex justify-between items-center p-4 border-b">
                        <h3 class="font-bold text-lg">
                           {{#if (eq rightNavContentType "organizationSelector")}}Build Your Content{{/if}}
                        </h3>
                        <button class="text-sm text-gray-600 hover:text-black" {{on "click" this.closeRightNav}}>Close</button>
                        </div>
                        <div class="flex border-b mb-4">
                            <button
                                class="flex-1 text-sm font-semibold py-2 px-3 border-b-2 transition
                                    {{if (eq this.activeRightTab "task") "border-black text-black" "border-transparent text-gray-500"}}"
                                {{on "click" (fn this.setRightNavTab "task")}}
                            >
                                <img width="24" height="24" src="https://img.icons8.com/material-rounded/24/ingredients-list.png" alt="ingredients-list"/>
                                Task To Do
                            </button>
                            <button
                                class="flex-1 text-sm font-semibold py-2 px-3 border-b-2 transition
                                    {{if (eq this.activeRightTab "structure") "border-black text-black" "border-transparent text-gray-500"}}"
                                {{on "click" (fn this.setRightNavTab "structure")}}
                            >   
                                <img width="24" height="24" src="https://img.icons8.com/material-rounded/24/ingredients-list.png" alt="ingredients-list"/>
                                Structure
                            </button>
                        </div>

                        {{#if (eq this.activeRightTab "task")}}
                        <!-- Task To Do Content -->
                             {{#if (eq rightNavContentType "organizationSelector")}}
                                <div class="p-4 space-y-4">
                                    <div class="flex items-center justify-between">
                                    <span class="text-sm font-medium text-gray-700">Pick one organization</span>
                                    <div class="flex gap-3 items-center">
                                        <button class="text-green-600 hover:text-green-800 text-sm font-bold flex items-center gap-1">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                                        </svg>
                                        Add New
                                        </button>
                                        <button class="text-gray-600 hover:text-black flex items-center gap-1 text-sm">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01" />
                                        </svg>
                                        Search
                                        </button>
                                    </div>
                                    </div>

                                    <div class="flex flex-wrap gap-2">
                                    {{#each this.organizations as |org index|}}
                                        <button 
                                        class="badge px-4 py-1 rounded-full text-sm transition 
                                            {{if (eq this.selectedOrganization org) "bg-gray-800 text-white" "bg-gray-200 text-gray-700"}}"
                                        {{on "click" (fn this.selectOrganization org)}}>
                                        {{org}}
                                        </button>
                                    {{/each}}
                                    </div>
                                </div>
                                {{/if}}
                        {{/if}}
                        {{#if (eq this.activeRightTab "structure")}}
                        <!-- Structure Content -->
                        <div class="p-4 text-sm text-gray-700">
                            Structure-related content goes here...
                        </div>
                        {{/if}}

                       
                    </aside>
                    </div>
                {{/if}}

            </div>
        </ModalBox>
    </div>
</section>
